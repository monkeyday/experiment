function add(b,a,d,f){for(let c=a;c<a+d;c++)b[c]=f;return b}function addPrev(b,a,c,f,g,h){for(let d=a+c;0<d;d--)b[c-d]=new Date(f,g,h-d+1);return b}function addNext(b,a,c,d,f){for(let g=0;g<c;g++)b[a+g]=new Date(d,f,g+1);return b}function toArr(b){let c=[];return b.forEach((a)=>c.push(Object.values(a))),c}function today(a){let b=this.state.t.getFullYear(),c=this.state.t.getMonth(),f=this.state.t.getDate();return'string'!=typeof e&&b==a.getFullYear()&&c==a.getMonth()&&f==a.getDate()}function genClass(a,b,d){let f=[];return b.forEach((a,b)=>f.push(d[b])),f.join(' ')}function page(a){let b=a.target.value?a.target.value:a.target.text;b=-1===b.indexOf('>')?+b:this.state.c+1,console.dir(b),this.setState({r:20,p:20,c:b})}const Nav={Dropdown(b){let c=b.d.map((a,c)=>'-'===a?React.createElement('li',{key:c,className:'divider'}):React.createElement('li',{key:c},React.createElement('a',{href:'#',onClick:b.evt},a)));return React.createElement('li',{className:'nav-item dropdown'},React.createElement('a',{className:'nav-link dropdown-toggle',"data-toggle":'dropdown'},b.t,React.createElement('span',{className:'caret'})),React.createElement('ul',{className:'dropdown-menu'},c))},Nav(b){let c=[];return c=b.m.map((a,c)=>a.d?React.createElement(Nav.Dropdown,{key:c,t:a.t,d:a.d,evt:b.evt}):React.createElement('li',{key:c,className:'nav-item'},React.createElement('a',{href:'#',className:'nav-link',onClick:b.evt},a.t))),React.createElement('ul',{className:'nav nav-tabs nav-fill'},c)},Carousel(c){let d=[],a=[];return d.push(React.createElement('li',{key:i,"data-target":`#${c.id}`,"data-slide-to":i})),a.push(React.createElement('div',{key:i,className:'item active'},React.createElement('img',{src:c.img,alt:c.a}),React.createElement('div',{className:'carousel-caption'},React.createElement('h1',null,c.t),React.createElement('p',null,c.p)))),React.createElement('div',{id:c.id,className:'carousel slide',"data-ride":'carousel',ref:(a)=>this.e=a},React.createElement('ol',{className:'carousel-indicators'},d),React.createElement('div',{className:'carousel-inner'},a),React.createElement('a',{href:`#${c.id}`,className:'left carousel-control',"data-slide":'prev'},React.createElement('span',null)),React.createElement('a',{href:`#${c.id}`,className:'right carousel-control',"data-slide":'next'},React.createElement('span',null)))},Tab(c){let d=[],a=[];return d.push(React.createElement('li',null,React.createElement('a',{href:'',"data-toggle":'tab'},c.e))),a.push(React.createElement('div',{className:'tab-pane'})),React.createElement('div',null,React.createElement('ul',{className:'nav nav-tabs'},d),React.createElement('div',{className:'tab-content'},a))},Modal(b){let c=[React.createElement('div',{className:'row'},React.createElement('div',{className:'col-md-3'}))];return React.createElement('div',{className:'modal fade bs-example-modal-lg',id:b.id,tabIndex:'-1'},React.createElement('div',{className:'modal-dialog modal-lg'},React.createElement('div',{className:'modal-content'},React.createElement('div',{className:'modal-header'},React.createElement('h4',{className:'modal-title'},b.t)),React.createElement('div',{className:'modal-body'},c),React.createElement('div',{className:'modal-footer'},React.createElement('button',{type:'button',className:'btn btn-default',"data-dismiss":'modal'},'Close')))))},Collapse(b){let c=[React.createElement('div',{className:'panel panel-default'},React.createElement('div',{className:'panel-heading'},React.createElement('h4',{className:'panel-title'},React.createElement('a',{"data-toggle":'collapse',"data-parent":`#${b.id}`,href:b.a},b.t))),React.createElement('div',{className:'panel-collapse collapse in'},React.createElement('div',{className:'panel-body'},b.c)))];return React.createElement('div',{className:'panel-group',id:b.id},c)}},TB={c:['active','success','warning','danger','info'],Caption(a){return React.createElement('caption',{className:'bg-primary text-center'},a.t,React.createElement('br',null),a.children)},Th(a){return a.d.map((a,b)=>React.createElement('th',{className:'text-center',key:b},React.createElement('a',null,a)))},Row(a){return Array.isArray(a.d)?React.createElement('tr',null,React.createElement(TB.Col,{d:a.d.map((a)=>[a.getDate(),a.c])})):React.createElement('tr',null,React.createElement(TB.Col,{d:Object.values(a.d)}))},Col(a){return a.d.map((a,b)=>'string'==typeof a?React.createElement('td',{key:b},a):React.createElement('td',{key:b,className:a[1]},React.createElement('a',null,a[0])))},Page(b){var d=Math.floor;let f=[],a=[],g=b.c,h=b.p,j=b.t,k=0==g%h?g/h-1:d(g/h);for(let a,c=1;c<=h&&k*h+c<=j;c++)a=k*h+c,a==g?f.push(React.createElement('li',{className:'active',key:c},React.createElement('a',null,a))):f.push(React.createElement('li',{key:c},React.createElement('a',{onClick:b.page},a)));for(let c=1;c<=j;c++)a.push(React.createElement('option',{value:c,key:c},c));return React.createElement('div',{className:'row text-center'},React.createElement('div',{className:'col-md-11'},React.createElement('ul',{className:'pagination'},0<k&&React.createElement('li',null,React.createElement('a',{onClick:b.page},'<<')),1!==g&&React.createElement('li',{key:'prev'},React.createElement('a',{onClick:b.page},'<')),f,g!==j&&React.createElement('li',{key:'next'},React.createElement('a',{onClick:b.page},'>')),k<d(j/h)&&React.createElement('li',null,React.createElement('a',{onClick:b.page},'>>')))),React.createElement('div',{className:'col-md-1'},React.createElement('select',{className:'form-control input-sm',value:g,onChange:b.page},a)))}};class Tb extends React.Component{constructor(a){super(a),this.state={d:a.d,p:a.p,r:a.r,c:a.c,h:a.h,t:'Table'},this.page=page.bind(this)}render(){let b=this.state,c=b.d.length,d=b.r*b.c-1<c?b.d.slice((b.c-1)*b.r,b.r*b.c):b.d.slice((b.c-1)*b.r,c+1);return React.createElement('div',null,React.createElement('table',{className:'table table-bordered table-hover'},React.createElement(TB.Caption,{t:b.t},'\u5171',c,'\u7B46\u8CC7\u6599',c/b.r,'\u9801',React.createElement('br',null),'\u76EE\u524D\u662F\u7B2C\xA0',React.createElement('span',{className:'label label-warning'},b.c),'\xA0\u9801'),React.createElement('thead',null,React.createElement('tr',null,React.createElement(TB.Th,{d:b.h}))),React.createElement('tbody',null,d.map((a,b)=>React.createElement(TB.Row,{c:TB.c[b%7],d:a,key:b})))),React.createElement(TB.Page,{c:this.state.c,p:this.state.p,t:Math.ceil(this.state.d.length/this.state.r),page:this.page}))}}class Calendar extends React.Component{constructor(a){super(a),a.c.setState({tb:{r:20,p:20,c:2}});let b=new Date,c=a.y?a.y:b.getFullYear(),d=0==c%4&&0!=c%100||0==c%400?29:28;this.state={t:b,y:c,m:a.m?a.m-1:b.getMonth(),n:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],yn:['','Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],d:[31,d,31,30,31,30,31,31,30,31,30,31]},this.month=this.month.bind(this),this.year=this.year.bind(this),this.today=today.bind(this)}month(c=this.state.y,f=this.state.m){let g=[],a=[],b=this.state.d[f];for(let a=1;a<=b;a++){let d=new Date(c,f,a),h=d.getDay();1==a&&0!==h&&addPrev(g,0,h,c,f-1,this.state.d[f-1]),g.push(d),a==b&&6!==h&&addNext(g,g.length,6-h,c,f+1,this.state.d[f+1])}for(;0<g.length;)a.push(g.splice(0,7));return a}year(c=this.state.y){let f=[],a=[],b=this.state.d;for(let a,d=0;12>d;d++){a=[];for(let f=1;f<=b[d];f++){let g=new Date(c,d,f),h=g.getDay();1==f&&0!==h&&add(a,0,h,''),a.push(g),f==b[d]&&6!==h&&add(a,a.length,6-h,'')}f[d]=a}for(;f.some((a)=>0!==a.length);){let b=[];f.forEach((a)=>{0===a.length?b.push(''):b.push(a.shift())}),a.push(b)}return a=a.filter((a)=>a.some((a)=>''!==a)),a.forEach((a,b)=>a.unshift(this.state.n[b%7])),a}today(a){let b=this.state.t.getFullYear(),c=this.state.t.getMonth(),f=this.state.t.getDate();return'string'!=typeof e&&b==a.getFullYear()&&c==a.getMonth()&&f==a.getDate()}componentDidMount(){}render(){this.month(2017,4).map((a,b)=>React.createElement(TB.Row,{key:b,d:a,t:this.state.t,c:0==b%7||6==b%7?'bg-danger':''}));return React.createElement(Tb,{t:'Calendar',c:this.state.y+' / '+(this.state.m+1),h:this.state.n,d:this.month(2017,9),to:this.today})}}class Filter extends React.PureComponent{constructor(a){super(a),this.date=this.date.bind(this),$.datepicker.setDefaults({yearRange:'-10:c',changeYear:!0,changeMonth:!0,showMonthAfterYear:!0,constraintInput:!0,dateFormat:'yy.mm.dd',defaultDate:'-1y -1m +3d',maxDate:'+1m'})}date(a){a.persist(),$(a.target).datepicker({onSelect:()=>this.props.setDate(a)})}render(){return console.log('render Filter'),React.createElement('form',{className:'form-inline'},React.createElement('div',{className:'form-group'},React.createElement('label',{className:'control-label'},this.props.sday,React.createElement('input',{type:'text',className:'form-control',id:'sday',placeholder:'\u8ACB\u8F38\u5165\u4EA4\u6613\u8D77\u59CB\u65E5\u671F',value:this.props.filter.sday,onFocus:this.date,onChange:this.props.setDate}))),React.createElement('div',{className:'form-group'},React.createElement('label',{className:'control-label'},this.props.eday,React.createElement('input',{type:'text',className:'form-control',id:'eday',placeholder:'\u8ACB\u8F38\u5165\u4EA4\u6613\u7D50\u675F\u65E5\u671F',value:this.props.filter.eday,onFocus:this.date,onChange:this.props.setDate}))),React.createElement('div',{className:'form-group'},React.createElement('label',{className:'control-label'},this.props.label,React.createElement('input',{type:'text',className:'form-control',placeholder:'\u8ACB\u8F38\u5165\u4F5C\u7269\u540D\u7A31',value:this.props.filter.pname,onChange:this.props.search}))),React.createElement('div',{className:'checkbox'},React.createElement('label',null,'\u9032\u53E3',React.createElement('input',{className:'form-control',type:'checkbox'}))),React.createElement('div',{className:'form-group'},React.createElement('label',{className:'control-label'},this.props.BA,React.createElement('input',{type:'text',className:'form-control',placeholder:'\u8ACB\u8F38\u5165\u4EA4\u6613\u91CF\u4E0B\u9650'}))),React.createElement('div',{className:'form-group'},React.createElement('label',{className:'control-label'},this.props.TA,React.createElement('input',{type:'text',className:'form-control',placeholder:'\u8ACB\u8F38\u5165\u4EA4\u6613\u91CF\u4E0A\u9650'}))),React.createElement('button',{type:'button',className:'btn btn-default'},'\u67E5\u8A62'))}}class Contentt extends React.Component{constructor(a){super(a);var b={},c={},d={};'CP'===a.ini.T?(c[a.ini.I]=a.data,b[a.ini.T]=c):b[a.ini.T]={all:a.data},d[a.ini.T]=a.ini,this.state={data:a.data.slice(0,a.g.R),cur:1,filter:{sday:'',eday:'',pname:''},graph:[],storage:b,type:a.ini.T,query:[],opt:d,item:a.ini.I||'all'},this.sort=this.sort.bind(this),this.setDate=this.setDate.bind(this),this.formatDate=this.formatDate.bind(this),this.graph=this.graph.bind(this),this.page=this.page.bind(this),this.filter=this.filter.bind(this),this.setQuery=this.setQuery.bind(this),this.getData=this.getData.bind(this),this.loadData=this.loadData.bind(this),this.search=this.search.bind(this),this.category=this.category.bind(this)}sort(a){var c=a.target.text,b=[],f={},g=this.state.storage,d=this.state.type;b=['\u4EE3\u865F','\u540D\u7A31','\u4EE3\u78BC','\u4F5C\u7269'].some((a)=>-1!==c.indexOf(a))?g[d].all.sort((d,a)=>this.state.asc[c]?a[c].localeCompare(d[c]):d[c].localeCompare(a[c])):-1===c.indexOf('\u65E5\u671F')?g[d].all.sort((d,a)=>this.state.asc[c]?a[c]-d[c]:d[c]-a[c]):g[d].all.sort((d,a)=>this.state.asc[c]?this.formatDate(a[c])-this.formatDate(d[c]):this.formatDate(d[c])-this.formatDate(a[c])),g[d]=b,f[c]=!this.state.asc[c],this.setState((a,b)=>({storage:Object.assign(a.storage,g),asc:Object.assign(a.asc,f),data:a.storage[d].slice((a.cur-1)*b.g.R,a.cur*b.g.R)}))}formatDate(a){var b=[];return-1===a.indexOf('.')?-1===a.indexOf('-')?b.push(a.substr(0,3),a.substr(3,2),a.substr(-2,2)):b=a.split('-'):b=a.split('.'),-1===a.indexOf('-')?new Date(+b[0]+1911,+b[1]-1,+b[2]):new Date(+b[0],+b[1]-1,+b[2])}setDate(a){var b={};b[a.target.id]=a.target.value,this.setState({filter:Object.assign(this.state.filter,b)})}search(a){var b=this.state.data,c=a.target.value;if(''==c)return console.log('none'),this.setState({data:b}),null;var d=this.state.data.filter((a)=>-1!==a.作物名稱.indexOf(c));this.setState({data:d})}graph(a){var b=a.target.text;$('#graph').modal('toggle'),this.loadData(1,0,this.state.type,b),this.setState({graph:this.state.data})}getData(a,b,d){var d=d||this.state.type;this.state.storage[d]!==void 0&&this.state.storage[d][this.state.item]?this.state.storage[d][this.state.item].length!==this.state.opt[d].N&&this.state.storage[d][this.state.item].length<a*this.props.g.R?(console.log('loading data'),this.loadData(a,b,d)):this.setState((b,d)=>({cur:a,data:b.storage[b.type][b.item].slice((a-1)*d.g.R,a*d.g.R)})):(console.log('loading data'),this.loadData(a,b,d))}page(a){var b=Math.floor,d=this.state.cur,c=this.props.g.P,f=a.target.text?a.target.text:a.target.value;'prev'===f?d-=1:'next'===f?d+=1:'dcr'===f?d=(0==d%c?d/c-2:b(d/c)-1)*c+1:'icr'===f?d=(0==d%c?d/c:b(d/c)+1)*c+1:d=+f;this.getData(d,0==d%c?d/c-1:b(d/c))}category(a){var b='';a.preventDefault(),$(a.target).tab('show'),'dropdown-menu'==a.target.parentNode.parentNode.className?($(a.target.parentNode.parentNode).tab('show'),b=a.target.parentNode.parentNode.previousSibling.hash+a.target.hash,b=b.split('#'),b.shift()):'tab-content'==a.target.parentNode.parentNode.nextSibling.className&&(b=a.target.hash,b=b.substr(1)),'object'==typeof b?this.getData(1,0,b[0]):this.loadData(1,0,this.state.type,b),console.dir(b)}filter(){}setQuery(){}loadData(a,b,f,g){g=g||'',$.ajax({url:'/T/'+f+'/'+b+'/'+g,success:function(h){var d={},j={},k={};0==b&&(k[f]=h.pop()),g?j[g]=h:j[this.state.item]=this.state.storage[f]!==void 0&&this.state.storage[f][this.state.item]?this.state.storage[f][this.state.item].concat(h):h,d[f]=this.state.storage[f]?Object.assign(this.state.storage[f],j):j,this.setState({cur:a,storage:Object.assign(this.state.storage,d),data:g?d[f][g].slice((a-1)*this.props.g.R,a*this.props.g.R):d[f].all.slice((a-1)*this.props.g.R,a*this.props.g.R),type:f,opt:Object.assign(this.state.opt,k),item:g||'all'})}.bind(this),error:function(a,b,c){console.log(this.url,b,c.toString())}.bind(this)})}componentWillMount(){console.log('component will mount')}render(){var a=Math.ceil;return console.log('render Content'),React.createElement('div',{className:'row'},React.createElement(Nav,{m:this.props.g.M,cate:this.category}),React.createElement(Filter,{filter:this.state.filter,setDate:this.setDate,search:this.search}),React.createElement(Tb,{data:this.state.data.filter((a)=>''!==a.作物),sort:this.sort,opt:this.state.opt[this.state.type],graph:this.graph,p:a(this.state.opt[this.state.type].N/this.props.g.R),c:this.state.cur,cate:this.category}),React.createElement(Pagination,{c:this.state.cur,t:a(this.state.opt[this.state.type].N/this.props.g.R),p:this.props.g.P,page:this.page}),React.createElement(Modal,{d:this.state.graph}))}componentDidMount(){var a={};this.state.opt[this.state.type].H.forEach((b)=>a[b]=null),this.setState({asc:a})}}